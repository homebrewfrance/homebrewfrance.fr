######### Generated by Lwspanel #########
######### Ne pas modifier / Don't touch #########

RewriteEngine on
RewriteCond %{HTTP_HOST} (.*\.)?homebrewfrance.fr [NC]
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(.*\.)?homebrewfrance.fr [NC]
RewriteRule \.(bmp|dib|rle|emf|wmf|gif|jpg|jpeg|jpe|jif|jfif|pcx|png|tga|tiff|tif)$ - [NC,F,L]

######### End Generated by Lwspanel #########
RewriteEngine On

# Redirection vers HTTPS
# RewriteCond %{HTTPS} !=on
# RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Redirection vers 503.html (exceptions pour certains dossiers et fichier 503.html)
# RewriteCond %{REQUEST_URI} !^/(scripts|devenir-helper|error|style|discord\.homebrew-france\.fr)(/.*)?$
# RewriteRule ^(.*)$ /error/503.html [L]

# Redirection www -> non-www
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

# Redirection de docs.homebrewfrance.fr/ps2 vers homebrewfrance.fr/docs/ps2
RewriteCond %{HTTP_HOST} ^docs\.homebrewfrance\.fr$ [NC]
RewriteRule ^ps2$ https://homebrewfrance.fr/docs/ps2 [R=301,L]
RewriteRule ^ps4$ https://homebrewfrance.fr/docs/ps4 [R=301,L]
RewriteRule ^psvita$ https://homebrewfrance.fr/docs/psvita [R=301,L]
RewriteRule ^switch$ https://homebrewfrance.fr/docs/switch [R=301,L]
RewriteRule ^3ds$ https://homebrewfrance.fr/docs/3ds [R=301,L]
RewriteRule ^dsi$ https://homebrewfrance.fr/docs/dsi [R=301,L]
RewriteRule ^sideloading-ios$ https://homebrewfrance.fr/docs/sideloading-ios [R=301,L]
RewriteRule ^revanced$ https://homebrewfrance.fr/docs/revanced [R=301,L]
RewriteRule ^xbox$ https://homebrewfrance.fr/docs/xbox [R=301,L]

# Erreurs personnalisées
ErrorDocument 404 /error/404.html
ErrorDocument 403 /error/403.html
ErrorDocument 503 /error/503.html

# Désactiver l'indexation
Options -Indexes

# CORS Headers
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, Authorization"
    Header set Content-Security-Policy "frame-ancestors 'self' https://open.spotify.com;"
</IfModule>
